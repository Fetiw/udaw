"use strict";

var SIZE_ROW = 20;
var SIZE_COL = 20;

var randomInteger = function randomInteger(min, max) {
  var rand = min - 0.5 + Math.random() * (max - min + 1);
  rand = Math.round(rand);
  return rand;
};

var Snake = function Snake(matrix, food, row, col) {
  var TYPE = 'snake';
  var currentCourse = { row: 1, col: 0 };
  var body = [{
    row: randomInteger(0, row),
    col: randomInteger(0, col)
  }];

  matrix.fireCells(body, TYPE);

  var move = function move() {
    var head = body[0];
    var nextHead = getNextCoordinates(head, currentCourse);

    body.unshift(nextHead);
    matrix.fireCells([nextHead], TYPE);

    if (!matrix.checkFood(nextHead)) {
      var tail = body.pop();
      matrix.cleanCells([tail]);
    } else {
      food();
    }
  };

  var getNextCoordinates = function getNextCoordinates(coordinates, currentCourse) {
    var newCoordinates = {
      row: coordinates.row + currentCourse.row,
      col: coordinates.col + currentCourse.col
    };

    if (newCoordinates.row < 0) {
      newCoordinates.row = row - 1;
    }

    if (newCoordinates.row === row) {
      newCoordinates.row = 0;
    }

    if (newCoordinates.col < 0) {
      newCoordinates.col = col - 1;
    }

    if (newCoordinates.col === col) {
      newCoordinates.col = 0;
    }

    return newCoordinates;
  };

  var setCourse = function setCourse(course) {
    var COURSE = {
      "ArrowUp": { row: -1, col: 0 },
      "ArrowDown": { row: 1, col: 0 },
      "ArrowRight": { row: 0, col: 1 },
      "ArrowLeft": { row: 0, col: -1 }
    };

    currentCourse = COURSE[course];
  };

  return { move: move, setCourse: setCourse };
};

var MATRIX = function MATRIX($container, row, col) {
  $container.css({
    width: 40 * row + 50,
    height: 40 * col + 50
  });

  for (var i = 0; i < row; i++) {
    for (var j = 0; j < col; j++) {
      $container.append("<div class='block' data-row=" + i + " data-col=" + j + "/>");
    }
  }

  var fireCells = function fireCells(coordinates, type) {
    for (var _i = 0; _i < coordinates.length; _i++) {
      $(".block[data-row=" + coordinates[_i].row + "][data-col=" + coordinates[_i].col + "]").addClass(type);
    }
  };

  var cleanCells = function cleanCells(coordinates) {
    for (var _i2 = 0; _i2 < coordinates.length; _i2++) {
      $(".block[data-row=" + coordinates[_i2].row + "][data-col=" + coordinates[_i2].col + "]").removeClass('snake').removeClass('food');
    }
  };

  var checkFood = function checkFood(coordinate) {
    return $(".block[data-row=" + coordinate.row + "][data-col=" + coordinate.col + "]").hasClass('food');
  };

  return { cleanCells: cleanCells, fireCells: fireCells, checkFood: checkFood };
};

var Food = function Food(matrix, row, col) {
  return function () {
    matrix.fireCells([{
      row: randomInteger(0, row),
      col: randomInteger(0, col)
    }], 'food');
  };
};

var start = function start() {
  var matrix = MATRIX($('#matrix'), SIZE_COL, SIZE_ROW);
  var food = Food(matrix, SIZE_ROW, SIZE_COL);
  var snake = Snake(matrix, food, SIZE_ROW, SIZE_COL);

  food();

  $(window).keydown(function (e) {
    snake.setCourse(e.key);
  });

  setInterval(function () {
    snake.move();
  }, 100);
};

start();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS5qcyJdLCJuYW1lcyI6WyJTSVpFX1JPVyIsIlNJWkVfQ09MIiwicmFuZG9tSW50ZWdlciIsIm1pbiIsIm1heCIsInJhbmQiLCJNYXRoIiwicmFuZG9tIiwicm91bmQiLCJTbmFrZSIsIm1hdHJpeCIsImZvb2QiLCJyb3ciLCJjb2wiLCJUWVBFIiwiY3VycmVudENvdXJzZSIsImJvZHkiLCJmaXJlQ2VsbHMiLCJtb3ZlIiwiaGVhZCIsIm5leHRIZWFkIiwiZ2V0TmV4dENvb3JkaW5hdGVzIiwidW5zaGlmdCIsImNoZWNrRm9vZCIsInRhaWwiLCJwb3AiLCJjbGVhbkNlbGxzIiwiY29vcmRpbmF0ZXMiLCJuZXdDb29yZGluYXRlcyIsInNldENvdXJzZSIsImNvdXJzZSIsIkNPVVJTRSIsIk1BVFJJWCIsIiRjb250YWluZXIiLCJjc3MiLCJ3aWR0aCIsImhlaWdodCIsImkiLCJqIiwiYXBwZW5kIiwidHlwZSIsImxlbmd0aCIsIiQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiY29vcmRpbmF0ZSIsImhhc0NsYXNzIiwiRm9vZCIsInN0YXJ0Iiwic25ha2UiLCJ3aW5kb3ciLCJrZXlkb3duIiwiZSIsImtleSIsInNldEludGVydmFsIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLFdBQVcsRUFBakI7QUFDQSxJQUFNQyxXQUFXLEVBQWpCOztBQUVBLElBQUlDLGdCQUFnQixTQUFoQkEsYUFBZ0IsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQWM7QUFDaEMsTUFBSUMsT0FBT0YsTUFBTSxHQUFOLEdBQVlHLEtBQUtDLE1BQUwsTUFBaUJILE1BQU1ELEdBQU4sR0FBWSxDQUE3QixDQUF2QjtBQUNBRSxTQUFPQyxLQUFLRSxLQUFMLENBQVdILElBQVgsQ0FBUDtBQUNBLFNBQU9BLElBQVA7QUFDRCxDQUpEOztBQU1BLElBQUlJLFFBQVEsU0FBUkEsS0FBUSxDQUFDQyxNQUFELEVBQVNDLElBQVQsRUFBZUMsR0FBZixFQUFvQkMsR0FBcEIsRUFBNEI7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S1gsY0FBYyxDQUFkLEVBQWlCVyxHQUFqQjtBQUZXLEtBQUQsQ0FBakIsRUFHSSxNQUhKO0FBSUQsR0FMRDtBQU1ELENBUEQ7O0FBU0EsSUFBSW1DLFFBQVEsU0FBUkEsS0FBUSxHQUFNO0FBQ2hCLE1BQUl0QyxTQUFTc0IsT0FBT1UsRUFBRSxTQUFGLENBQVAsRUFBcUJ6QyxRQUFyQixFQUErQkQsUUFBL0IsQ0FBYjtBQUNBLE1BQUlXLE9BQU9vQyxLQUFLckMsTUFBTCxFQUFhVixRQUFiLEVBQXVCQyxRQUF2QixDQUFYO0FBQ0EsTUFBSWdELFFBQVF4QyxNQUFNQyxNQUFOLEVBQWNDLElBQWQsRUFBb0JYLFFBQXBCLEVBQThCQyxRQUE5QixDQUFaOztBQUVBVTs7QUFHQStCLElBQUVRLE1BQUYsRUFBVUMsT0FBVixDQUFrQixVQUFTQyxDQUFULEVBQVk7QUFDNUJILFVBQU1wQixTQUFOLENBQWdCdUIsRUFBRUMsR0FBbEI7QUFDRCxHQUZEOztBQUlBQyxjQUFZLFlBQVc7QUFDckJMLFVBQU0vQixJQUFOO0FBQ0QsR0FGRCxFQUVHLEdBRkg7QUFHRCxDQWZEOztBQWlCQThCIiwiZmlsZSI6ImN1c3RvbS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNJWkVfUk9XID0gMjA7XG5jb25zdCBTSVpFX0NPTCA9IDIwO1xuXG5sZXQgcmFuZG9tSW50ZWdlciA9IChtaW4sIG1heCkgPT4ge1xuICBsZXQgcmFuZCA9IG1pbiAtIDAuNSArIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluICsgMSk7XG4gIHJhbmQgPSBNYXRoLnJvdW5kKHJhbmQpO1xuICByZXR1cm4gcmFuZDtcbn1cblxubGV0IFNuYWtlID0gKG1hdHJpeCwgZm9vZCwgcm93LCBjb2wpID0+IHtcbiAgY29uc3QgVFlQRSA9ICdzbmFrZSc7XG4gIGxldCBjdXJyZW50Q291cnNlID0geyByb3c6IDEsIGNvbDogMCB9O1xuICBsZXQgYm9keSA9IFt7XG4gICAgcm93OiByYW5kb21JbnRlZ2VyKDAsIHJvdyksXG4gICAgY29sOiByYW5kb21JbnRlZ2VyKDAsIGNvbClcbiAgfV07XG5cbiAgbWF0cml4LmZpcmVDZWxscyhib2R5LCBUWVBFKTtcblxuICBsZXQgbW92ZSA9ICgpID0+IHtcbiAgICBsZXQgaGVhZCA9IGJvZHlbMF07XG4gICAgbGV0IG5leHRIZWFkID0gZ2V0TmV4dENvb3JkaW5hdGVzKGhlYWQsIGN1cnJlbnRDb3Vyc2UpO1xuXG4gICAgYm9keS51bnNoaWZ0KG5leHRIZWFkKTtcbiAgICBtYXRyaXguZmlyZUNlbGxzKFtuZXh0SGVhZF0sIFRZUEUpO1xuXG4gICAgaWYoICFtYXRyaXguY2hlY2tGb29kKG5leHRIZWFkKSApIHtcbiAgICAgIGxldCB0YWlsID0gYm9keS5wb3AoKTtcbiAgICAgIG1hdHJpeC5jbGVhbkNlbGxzKFt0YWlsXSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZm9vZCgpO1xuICAgIH1cbiAgfVxuXG4gIGxldCBnZXROZXh0Q29vcmRpbmF0ZXMgPSAoY29vcmRpbmF0ZXMsIGN1cnJlbnRDb3Vyc2UpID0+IHtcbiAgICBsZXQgbmV3Q29vcmRpbmF0ZXMgPSB7XG4gICAgICByb3c6IGNvb3JkaW5hdGVzLnJvdyArIGN1cnJlbnRDb3Vyc2Uucm93LFxuICAgICAgY29sOiBjb29yZGluYXRlcy5jb2wgKyBjdXJyZW50Q291cnNlLmNvbFxuICAgIH07XG5cbiAgICBpZiggbmV3Q29vcmRpbmF0ZXMucm93IDwgMCApIHtcbiAgICAgIG5ld0Nvb3JkaW5hdGVzLnJvdyA9IHJvdyAtIDE7XG4gICAgfVxuXG4gICAgaWYoIG5ld0Nvb3JkaW5hdGVzLnJvdyA9PT0gcm93ICkge1xuICAgICAgbmV3Q29vcmRpbmF0ZXMucm93ID0gMDtcbiAgICB9XG5cbiAgICBpZiggbmV3Q29vcmRpbmF0ZXMuY29sIDwgMCApIHtcbiAgICAgIG5ld0Nvb3JkaW5hdGVzLmNvbCA9IGNvbCAtIDE7XG4gICAgfVxuXG4gICAgaWYoIG5ld0Nvb3JkaW5hdGVzLmNvbCA9PT0gY29sICkge1xuICAgICAgbmV3Q29vcmRpbmF0ZXMuY29sID0gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3Q29vcmRpbmF0ZXM7XG4gIH1cblxuICBsZXQgc2V0Q291cnNlID0gKGNvdXJzZSkgPT4ge1xuICAgIGNvbnN0IENPVVJTRSA9IHtcbiAgICAgIFwiQXJyb3dVcFwiOiB7IHJvdzogLTEsIGNvbDogMCB9LFxuICAgICAgXCJBcnJvd0Rvd25cIjogeyByb3c6IDEsIGNvbDogMCB9LFxuICAgICAgXCJBcnJvd1JpZ2h0XCI6IHsgcm93OiAwLCBjb2w6IDEgfSxcbiAgICAgIFwiQXJyb3dMZWZ0XCI6IHsgcm93OiAwLCBjb2w6IC0xIH0sXG4gICAgfTtcblxuICAgIGN1cnJlbnRDb3Vyc2UgPSBDT1VSU0VbY291cnNlXTtcbiAgfVxuXG4gIHJldHVybiB7IG1vdmUsIHNldENvdXJzZSB9XG59XG5cbmxldCBNQVRSSVggPSAoJGNvbnRhaW5lciwgcm93LCBjb2wpID0+IHtcbiAgJGNvbnRhaW5lci5jc3Moe1xuICAgIHdpZHRoOiA0MCAqIHJvdyArIDUwLFxuICAgIGhlaWdodDogNDAgKiBjb2wgKyA1MCxcbiAgfSk7XG5cbiAgZm9yKCBsZXQgaSA9IDA7IGkgPCByb3c7IGkrKyApIHtcbiAgICBmb3IoIGxldCBqID0gMDsgaiA8IGNvbDsgaisrICkge1xuICAgICAgJGNvbnRhaW5lci5hcHBlbmQoYDxkaXYgY2xhc3M9J2Jsb2NrJyBkYXRhLXJvdz0ke2l9IGRhdGEtY29sPSR7an0vPmApO1xuICAgIH1cbiAgfVxuXG4gIGxldCBmaXJlQ2VsbHMgPSAoY29vcmRpbmF0ZXMsIHR5cGUpID0+IHtcbiAgICBmb3IoIGxldCBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrICkge1xuICAgICAgJChgLmJsb2NrW2RhdGEtcm93PSR7Y29vcmRpbmF0ZXNbaV0ucm93fV1bZGF0YS1jb2w9JHtjb29yZGluYXRlc1tpXS5jb2x9XWApXG4gICAgICAgIC5hZGRDbGFzcyh0eXBlKVxuICAgIH1cbiAgfVxuXG4gIGxldCBjbGVhbkNlbGxzID0gKGNvb3JkaW5hdGVzKSA9PntcbiAgICBmb3IoIGxldCBpID0gMDsgaSA8IGNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrICkge1xuICAgICAgJChgLmJsb2NrW2RhdGEtcm93PSR7Y29vcmRpbmF0ZXNbaV0ucm93fV1bZGF0YS1jb2w9JHtjb29yZGluYXRlc1tpXS5jb2x9XWApXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc25ha2UnKVxuICAgICAgICAucmVtb3ZlQ2xhc3MoJ2Zvb2QnKTtcbiAgICB9XG4gIH1cblxuICBsZXQgY2hlY2tGb29kID0gKGNvb3JkaW5hdGUpID0+e1xuICAgIHJldHVybiAkKGAuYmxvY2tbZGF0YS1yb3c9JHtjb29yZGluYXRlLnJvd31dW2RhdGEtY29sPSR7Y29vcmRpbmF0ZS5jb2x9XWApXG4gICAgICAuaGFzQ2xhc3MoJ2Zvb2QnKTtcbiAgfVxuXG4gIHJldHVybiB7IGNsZWFuQ2VsbHMsIGZpcmVDZWxscywgY2hlY2tGb29kIH1cbn1cblxubGV0IEZvb2QgPSAobWF0cml4LCByb3csIGNvbCkgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgbWF0cml4LmZpcmVDZWxscyhbe1xuICAgICAgcm93OiByYW5kb21JbnRlZ2VyKDAsIHJvdyksXG4gICAgICBjb2w6IHJhbmRvbUludGVnZXIoMCwgY29sKVxuICAgIH1dLCAnZm9vZCcpO1xuICB9XG59XG5cbmxldCBzdGFydCA9ICgpID0+IHtcbiAgbGV0IG1hdHJpeCA9IE1BVFJJWCgkKCcjbWF0cml4JyksIFNJWkVfQ09MLCBTSVpFX1JPVyk7XG4gIGxldCBmb29kID0gRm9vZChtYXRyaXgsIFNJWkVfUk9XLCBTSVpFX0NPTCk7XG4gIGxldCBzbmFrZSA9IFNuYWtlKG1hdHJpeCwgZm9vZCwgU0laRV9ST1csIFNJWkVfQ09MKTtcblxuICBmb29kKCk7XG5cblxuICAkKHdpbmRvdykua2V5ZG93bihmdW5jdGlvbihlKSB7XG4gICAgc25ha2Uuc2V0Q291cnNlKGUua2V5KTtcbiAgfSk7XG5cbiAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgc25ha2UubW92ZSgpO1xuICB9LCAxMDApO1xufVxuXG5zdGFydCgpO1xuXG5cblxuIl19
